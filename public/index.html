<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Application S√©curis√©e - Gestion de Donn√©es</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://www.google.com/recaptcha/api.js?onload=onGrecaptchaLoad&render=explicit" async defer></script>
</head>
<body>
    <div class="container" id="app">
        <!-- Navigation -->
        <nav class="navbar" id="navbar" style="display: none;">
            <div class="nav-brand">
                <h2>üîí SecureApp</h2>
            </div>
            <div class="nav-links">
                <a href="#" data-action="showProfile">Profil</a>
                <a href="#" data-action="showSecurity">S√©curit√©</a>
                <a href="#" id="adminLink" style="display: none;" data-action="showAdmin">Administration</a>
                <a href="#" data-action="logout">D√©connexion</a>
            </div>
        </nav>

        <!-- Formulaire de connexion -->
        <div class="auth-container" id="loginForm">
            <div class="auth-card">
                <h2>Connexion</h2>
                <form id="loginFormElement">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Mot de passe</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <div class="form-group">
                        <div class="recaptcha-container">
                            <div id="recaptcha-login"></div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Se connecter</button>
                    <div class="form-links">
                        <a href="#" data-action="showRegister">Cr√©er un compte</a>
                        <a href="#" data-action="showPasswordReset">Mot de passe oubli√©?</a>
                    </div>
                </form>
                <div id="loginMessage" class="message"></div>
            </div>
        </div>

        <!-- Formulaire d'inscription -->
        <div class="auth-container" id="registerForm" style="display: none;">
            <div class="auth-card">
                <h2>Inscription</h2>
                <form id="registerFormElement">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Mot de passe</label>
                        <input type="password" id="registerPassword" required>
                        <small>Min 8 caract√®res, majuscule, minuscule, chiffre et caract√®re sp√©cial</small>
                    </div>
                    <div class="form-group">
                        <label>T√©l√©phone (optionnel)</label>
                        <input type="tel" id="registerPhone" placeholder="+33612345678">
                    </div>
                    <div class="form-group">
                        <div class="recaptcha-container">
                            <div id="recaptcha-register"></div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">S'inscrire</button>
                    <div class="form-links">
                        <a href="#" data-action="showLogin">D√©j√† un compte? Se connecter</a>
                    </div>
                </form>
                <div id="registerMessage" class="message"></div>
            </div>
        </div>

        <!-- V√©rification Email -->
        <div class="auth-container" id="verifyEmailForm" style="display: none;">
            <div class="auth-card">
                <h2>V√©rification Email</h2>
                <p>Un code de v√©rification a √©t√© envoy√© √† votre email.</p>
                <form id="verifyEmailFormElement">
                    <div class="form-group">
                        <label>Code de v√©rification</label>
                        <input type="text" id="verifyCode" maxlength="6" required>
                    </div>
                    <button type="submit" class="btn btn-primary">V√©rifier</button>
                    <div class="form-links">
                        <a href="#" data-action="resendCode">Renvoyer le code</a>
                    </div>
                </form>
                <div id="verifyMessage" class="message"></div>
            </div>
        </div>

        <!-- V√©rification 2FA -->
        <div class="auth-container" id="verify2FAForm" style="display: none;">
            <div class="auth-card">
                <h2>Authentification 2FA</h2>
                <p>Entrez le code g√©n√©r√© par votre application d'authentification.</p>
                <form id="verify2FAFormElement">
                    <div class="form-group">
                        <label>Code 2FA</label>
                        <input type="text" id="twoFACode" maxlength="6" required>
                    </div>
                    <button type="submit" class="btn btn-primary">V√©rifier</button>
                </form>
                <div id="2faMessage" class="message"></div>
            </div>
        </div>

        <!-- Demande de r√©initialisation de mot de passe -->
        <div class="auth-container" id="passwordResetRequestForm" style="display: none;">
            <div class="auth-card">
                <h2>Mot de passe oubli√©</h2>
                <p>Entrez votre adresse email et nous vous enverrons un code de r√©initialisation.</p>
                <form id="passwordResetRequestFormElement">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="resetEmail" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Envoyer le code</button>
                    <div class="form-links">
                        <a href="#" data-action="showLogin">Retour √† la connexion</a>
                    </div>
                </form>
                <div id="resetRequestMessage" class="message"></div>
            </div>
        </div>

        <!-- R√©initialisation de mot de passe avec code -->
        <div class="auth-container" id="passwordResetForm" style="display: none;">
            <div class="auth-card">
                <h2>R√©initialiser le mot de passe</h2>
                <p>Entrez le code re√ßu par email et votre nouveau mot de passe.</p>
                <form id="passwordResetFormElement">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="resetPasswordEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Code de r√©initialisation</label>
                        <input type="text" id="resetCode" maxlength="6" required>
                    </div>
                    <div class="form-group">
                        <label>Nouveau mot de passe</label>
                        <input type="password" id="newPasswordReset" required>
                        <small>Min 8 caract√®res, majuscule, minuscule, chiffre et caract√®re sp√©cial</small>
                    </div>
                    <div class="form-group">
                        <label>Confirmer le mot de passe</label>
                        <input type="password" id="confirmPasswordReset" required>
                    </div>
                    <button type="submit" class="btn btn-primary">R√©initialiser le mot de passe</button>
                    <div class="form-links">
                        <a href="#" data-action="showLogin">Retour √† la connexion</a>
                    </div>
                </form>
                <div id="resetMessage" class="message"></div>
            </div>
        </div>

        <!-- Dashboard -->
        <div class="dashboard" id="dashboard" style="display: none;">
            <h1>Tableau de bord</h1>

            <!-- Section Profil -->
            <div class="card" id="profileSection">
                <h2>Mon Profil</h2>
                <div id="profileContent"></div>
                
            </div>

            <!-- Section S√©curit√© -->
            <div class="card" id="securitySection" style="display: none;">
                <h2>S√©curit√©</h2>
                <div id="profileMessage" class="message" style="display: none;"></div>

                <!-- V√©rifications -->
                <div class="security-item">
                    <h3>V√©rifications du Compte</h3>
                    
                    <!-- Email -->
                    <div class="verification-block" id="emailVerificationSection">
                        <h4>Email <span id="emailVerificationStatus"></span></h4>
                        <div id="emailVerificationContent">
                            <p class="current-value"></p>
                            <button class="btn btn-primary" data-action="sendEmailVerification">V√©rifier l'email</button>
                            <div class="verification-form" style="display: none;">
                                <div class="form-group">
                                    <label>Code de v√©rification</label>
                                    <input type="text" id="emailVerificationCode" maxlength="6">
                                </div>
                                <button class="btn btn-primary" data-action="verifyEmail">Confirmer</button>
                            </div>
                        </div>
                    </div>

                    <!-- T√©l√©phone -->
                    <div class="verification-block" id="phoneVerificationSection">
                        <h4>T√©l√©phone <span id="phoneVerificationStatus"></span></h4>
                        <div id="phoneVerificationContent">
                            <div class="form-group">
                                <label>Num√©ro de t√©l√©phone</label>
                                <input type="tel" id="phoneNumber" placeholder="+33612345678">
                            </div>
                            <button class="btn btn-primary" data-action="updatePhone">Mettre √† jour</button>
                            <div class="verification-form" style="display: none;">
                                <div class="form-group">
                                    <label>Code de v√©rification</label>
                                    <input type="text" id="phoneVerificationCode" maxlength="6">
                                </div>
                                <button class="btn btn-primary" data-action="verifyPhone">V√©rifier</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2FA -->
                <div class="security-item">
                    <h3>Authentification √† deux facteurs (2FA)</h3>
                    <div id="2faContent"></div>
                </div>

                <!-- Changer mot de passe -->
                <div class="security-item">
                    <h3>Changer le mot de passe</h3>
                    <form id="changePasswordFormElement">
                        <div class="form-group">
                            <label>Mot de passe actuel</label>
                            <input type="password" id="currentPassword" required>
                        </div>
                        <div class="form-group">
                            <label>Nouveau mot de passe</label>
                            <input type="password" id="newPassword" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Changer</button>
                    </form>
                </div>

                <!-- Sessions actives -->
                <div class="security-item">
                    <h3>Sessions actives</h3>
                    <div id="sessionsContent"></div>
                </div>

                <!-- Logs de s√©curit√© -->
                <div class="security-item">
                    <h3>Logs de s√©curit√©</h3>
                    <div id="logsContent"></div>
                </div>
            </div>

            <!-- Section Admin -->
            <div class="card" id="adminSection" style="display: none;">
                <h2>Administration</h2>
                <div id="adminContent"></div>
            </div>
        </div>
    </div>

    <script src="/js/console-protection.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>
